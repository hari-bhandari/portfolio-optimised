!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactIntersectionObserver={},e.React)}(this,function(e,c){"use strict";function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e,t,r,n,o,i,s,a){if(!e){var d;if(void 0===t)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,i,s,a],h=0;(d=new Error(t.replace(/%s/g,function(){return c[h++]}))).name="Invariant Violation"}throw d.framesToPop=1,d}},u=new Map,f=new Map;function a(e,t,r,n){void 0===r&&(r={}),l(!u.has(e),"react-intersection-observer: Trying to observe %s, but it's already being observed by another instance.\nMake sure the `ref` is only used by a single <Observer /> instance.\n\n%s",e),r.threshold||(r.threshold=0);var o=r,i=o.root,s=o.rootMargin,a=o.threshold;if(e&&t){var d=s?a.toString()+"_"+s:a.toString();i&&(d=n?n+"_"+d:null);var c=d?f.get(d):null;c||(c=new IntersectionObserver(p,r),d&&f.set(d,c));var h={callback:t,visible:!1,options:r,observerId:d,observer:d?void 0:c};return u.set(e,h),c.observe(e),h}}function d(r){if(r){var e=u.get(r);if(e){var n=e.observerId,t=e.observer,o=n?f.get(n):t;o&&o.unobserve(r);var i=!1;n&&u.forEach(function(e,t){e&&e.observerId===n&&t!==r&&(i=!0)}),o&&!i&&(o.disconnect(),f.delete(n)),u.delete(r)}}}function p(e){e.forEach(function(e){var t=e.isIntersecting,r=e.intersectionRatio,n=e.target,o=u.get(n);if(o&&0<=r){var i=o.options,s=!1;Array.isArray(i.threshold)?s=i.threshold.some(function(e){return o.visible?e<r:e<=r}):void 0!==i.threshold&&(s=o.visible?r>i.threshold:r>=i.threshold),void 0!==t&&(s=s&&t),o.visible=s,o.callback(s,r)}})}var t=function(o){var e,t;function r(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(i(i(r=o.call.apply(o,[this].concat(t))||this)),"state",{inView:!1,intersectionRatio:0}),s(i(i(r)),"node",null),s(i(i(r)),"handleNode",function(e){r.node&&d(r.node),r.node=e,r.observeNode()}),s(i(i(r)),"handleChange",function(e,t){r.setState({inView:e,intersectionRatio:t}),r.props.onChange&&r.props.onChange(e,t)}),r}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){},n.componentDidUpdate=function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||(d(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&(d(this.node),this.node=null)},n.componentWillUnmount=function(){this.node&&(d(this.node),this.node=null)},n.observeNode=function(){if(this.node){var e=this.props,t=e.threshold,r=e.root,n=e.rootMargin,o=e.rootId;a(this.node,this.handleChange,{threshold:t,root:r,rootMargin:n},o)}},n.render=function(){var e=this.props,t=e.children,r=e.render,n=e.tag,o=(e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(o[r]=e[r]);return o}(e,["children","render","tag","triggerOnce","threshold","root","rootId","rootMargin"])),i=this.state,s=i.inView,a=i.intersectionRatio,d=t||r;return"function"==typeof d?d({inView:s,intersectionRatio:a,ref:this.handleNode}):c.createElement(n||"div",h({ref:this.handleNode},o),t)},r}(c.Component);s(t,"defaultProps",{threshold:0,triggerOnce:!1}),e.InView=t,e.default=t,e.useInView=function(t,r){void 0===r&&(r={});var e=c.useState(!1),n=e[0],o=e[1];return c.useEffect(function(){return t.current&&a(t.current,function(e){o(e),e&&r.triggerOnce&&d(t.current)},{threshold:r.threshold,root:r.root,rootMargin:r.rootMargin},r.rootId),function(){d(t.current)}},[r.threshold,r.root,r.rootMargin,r.rootId]),n},Object.defineProperty(e,"__esModule",{value:!0})});
